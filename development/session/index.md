## web安全编程
```
1.为什么要用session共享
2.session共享4中方式
  2.1.session复制
  2.2.session绑定
  2.3.利用cookie记录session
  2.4.session服务器
3.参考文章
```

## 1.为什么要用session共享

```
稍大一些的网站,通常都会有好几个服务器,每个服务器运行着不同功能的模块,使用不同的二级域名,而一个整体性强的网站,用户系统是统一的,
即一套用户名、密码在整个网站的各个模块中都是可以登录使用的.各个服务器共享用户数据是比较容易实现的,只需要在后端放个数据库服务器,
各个服务器通过统一接口对用户数据进行访问即可.但还存在一个问题,就是用户在这个服务器登录之后,进入另一个服务器的别的模块时,
仍然需要重新登录,这就是一次登录,全部通行的问题,映射到技术上,其实就是各个服务器之间如何实现共享 SESSION 数据的问题
```

## 2. session共享4中方式

### 2.1.session复制
```
描述:
  session复制是早期的企业级的使用比较多的一种服务器集群session管理机制.应用服务器开启web容器的session复制功能,
  在集群中的几台服务器之间同步session对象,使得每台服务器上都保存所有的session信息
  
优点:
  每台服务器上都保存所有的session信息,这样任何一台宕机都不会导致session的数据丢失,服务器使用session时,直接从本地获取;
  代码上不需要做支持和修改;
  
缺点:
  这种方式在应用集群达到数千台(或者说一定规模)的时候,就会出现瓶颈,每台都需要备份session,出现内存不够用的情况;
  在session数据量很大的情况下不仅占用网络资源,而且会导致延迟;
  
适用场景:
  只适用于Web服务器比较少且Session数据量少的情况
```

### 2.2.session绑定
```
描述:
  利用hash算法,比如nginx的ip_hash,使得同一个Ip的请求分发到同一台服务器上
  
优点:
  使用简单,没有额外开销;
  
缺点:
  这种方式不符合对系统的高可用要求,因为一旦某台服务器宕机,那么该机器上的session也就不复存在了
  用户请求切换到其他机器后没有session,无法完成业务处理
  
适用场景:
  对稳定性要求不是很高的业务情景
```

### 2.3.利用cookie记录session
```
描述:
  session记录在客户端,每次请求服务器的时候,将session放在请求中发送给服务器,服务器处理完请求后再将修改后的session响应给客户端.
  这里的客户端就是cookie
  
优点:
  不需要依赖额外外部存储，不需要额外配置
  cookie的简单易用,可用性高,支持应用服务器的线性伸缩,而大部分要记录的session信息比较小.
  因此事实上,许多网站或多或少的在使用cookie记录session
  
缺点:
  不安全,易被盗取或篡改;
  比如受cookie大小的限制,能记录的信息有限;
  每次请求响应都需要传递cookie,影响性能和需要消耗更多网络带宽;
  如果用户关闭cookie,访问就不正常;
  
适用场景:
  数据不重要、不敏感且数据量小的情况
```

### 2.4.session服务器
```
描述:
  在单独的服务器或服务器集群上使用缓存技术,如Redis存储Session数据,集中管理所有的Session,所有的Web服务器都从这个存储介质中存取对应的Session,实现Session共享
  
优点:
  可靠性高,减少Web服务器的资源开销;
  
缺点:
  实现上有些复杂,配置较多;
  
适用场景:
  Web服务器较多、要求高可用性的情况
```


## 3.参考文章

