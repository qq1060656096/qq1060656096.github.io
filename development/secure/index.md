## web安全编程
```
1.SQL注入
2.XSS 跨站脚本攻击
3.CSRF 跨站请求伪造
4.文件上传攻击
5.参考文章
```

### 1.SQL注入

```
SQL注入主要发生在应用程序数据库层面上.程序员在设计程序的时候,没有对用户的输入进行校验,含有特殊字符语句会被数据库误认为是正常的SQL指令而运行.
从而使数据库受到攻击,可能导致数据被窃取、更改、删除,以及进一步导致网站被嵌入恶意代码、被植入后门程序等危害.


如何解决:
  1.参数处理: 对用户的输入进行效验,对特殊字符进行转义处理(可能被编码绕过)
  2.最小化授权: 为每个应用配置最小化数据库操作权限,禁止使用管理员权限进行数据库操作
  3.敏感数据加密: 敏感信息都采用了加密、哈希或混淆等方式进行保密存储,降低可能漏洞带来的数据泄露风险
  4.禁止错误回显: 禁止系统开启 Debug模式或异常时返回包含敏感信息的提示,建议使用自定义的错误信息模板异常信息应存放在日志中用于安全审计
```

### 2.XSS 跨站脚本攻击

```
XSS 又叫 CSS (Cross Site Script) ,跨站脚本攻击.
一般是指黑客通过在网页中注入恶意脚本,当用户浏览网页时,恶意脚本执行,控制用户浏览器行为的一种攻击方式

危害:
  1.
  2.
  3.
  4.
  5.

如何解决:
  1.对输入输出的数据进行编码转换
  输入数据输出到不同场景中进行不同形式的编码,如输出到HTML标签中则进行HTML编码输出到URL中则进行URL编码,输出到JS中则行 Script编码,
  输出到 Stylet中则进行Css编码
```


### 3.CSRF 跨站请求伪造

```
CSRF(Cross Site Request Forgery)跨站请求伪造.也被称为One Click Attack和Session Riding,通常缩写为CSRF或XSRF
攻击者(黑客,钓鱼网站)盗用你的身份,发送恶意请求.
要完成一次csrf攻击,被攻击者需要完成两个操作:
  1. 登录收信任网站A,并在本地生成cookie
  2. 在与A的会话结束前,访问危险网站B(危险网站B甚至可能是一个存在漏洞的受人信任的网站)


危害:
  1.篡改目标网站上的用户数据
  2.获取用户的隐私数据
  3.作为其他攻击向量的辅助攻击手法
  4.传播CSRF蠕虫

如何解决:
  1.检查 Referer 字段: Referer最大弊病:有些请求不带Referer
  2.使用CSRF token: CSRF token最大弊病:随机性不够好或通过各种方式泄露
  3.使用验证码: 验证码最大弊病:影响用户体验
  4.限制Session生命周期
```


### 4.文件上传攻击

```
上传的文件能够被Web容器解释执行,所以文件上传后所在的目录需要解析器可以执行目录下的文件.也就是说文件目录必须在web容器覆盖路径内才行
例如: 上传文件是PHP、JSP、ASP等脚本代码,服务器的Web容器解释并执行了用户上传的脚本,导致代码执行

危害:
  1.上传的文件能够被Web容器解释执行,所以文件上传后所在的目录需要解析器可以执行目录下的文件.也就是说文件目录必须在web容器覆盖路径内才行
    例如: 上传文件是PHP、JSP、ASP等脚本代码,服务器的Web容器解释并执行了用户上传的脚本,导致代码执行
  2.上传的文件能够被Web容器解释执行,所以文件上传后所在的目录需要解析器可以执行目录下的文件.也就是说文件目录必须在web容器覆盖路径内才行
    例如: 上传文件是PHP、JSP、ASP等脚本代码,服务器的Web容器解释并执行了用户上传的脚本,导致代码执行
  3.用户可以直接通过浏览器进行访问这个shell文件,如果web容器不能解析这个文件,那么也不能算是漏洞
  4.传播CSRF蠕虫
  
如何解决:
  1.设置文件上传的目录设置为不可执行
  2.对文件进行随机性且不可猜解的重命名
  3.对文件内容本身做好格式验证,黑名单或者白名单的方式都可以
```


### 5.参考文章

- [Web安全开发规范手册V1.0](https://segmentfault.com/a/1190000017090860)